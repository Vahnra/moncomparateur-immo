<div class="container-xl bg-white text-dark mb-5">
    <form method="post">
      <div class="row ">
        <div class="col-lg-6 mx-auto mt-4 my-auto ps-3 pe-3">
  
          <div class="row">
  
            <div class="col-12">
              <h1 class="text-start fw-bold mt-5 mb-4 text-center fw-normal" style="color: #4E60F6">Inscription</h1>
            </div>
  
            <form (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm" [appMatchPassword]="['password', 'confirmPassword']">

                <h5 class=" text-center">Informations personelles</h5>

                <label class="mb-1 mt-3 form-label" for="inputEmail">Nom et prénom</label>
                <input 
                    type="text" 
                    class="form-control" 
                    name="username" 
                    [(ngModel)]="form.username" 
                    required minlength="3"
                    maxlength="20" 
                    #username="ngModel" 
                    [ngClass]="{ 'is-invalid': f.submitted && username.errors }"
                    placeholder=""
                >

                <div class="invalid-feedback" *ngIf="username.errors && f.submitted">
                    <div *ngIf="username.errors['required']">Veuillez entrer un nom</div>
                    <div *ngIf="username.errors['minlength']">
                        Ce nom est trop court.
                    </div>
                    <div *ngIf="username.errors['maxlength']">
                        Ce nom est trop long.
                    </div>
                </div>

                <label class="mb-1 mt-3 form-label" for="inputEmail">Numéro de téléphone</label>
                <input 
                    type="text" 
                    class="form-control"  
                    name="phoneNumbers" 
                    [(ngModel)]="form.phoneNumbers" 
                    required
                    minlength="10"
                    maxlength="10" 
                    #phoneNumbers="ngModel" 
                    [ngClass]="{ 'is-invalid': f.submitted && email.errors }"
                    placeholder=""
                >
                <div class="invalid-feedback" *ngIf="phoneNumbers.errors && f.submitted">
                    <div *ngIf="phoneNumbers.errors['required']">Veuillez entrer un numéro de téléphone</div>
                    <div *ngIf="phoneNumbers.errors['minlength']">
                        Ce numéro n'est pas valide.
                    </div>
                    <div *ngIf="phoneNumbers.errors['maxlength']">
                        Ce numéro n'est pas valide.
                    </div>
                </div>

                <label class="mb-1 mt-3 form-label" for="inputEmail">Code postal</label>
                <input 
                    type="text" 
                    class="form-control" 
                    name="postalCode" 
                    [(ngModel)]="form.postalCode" 
                    required minlength="5"
                    maxlength="5" 
                    #postalCode="ngModel" 
                    [ngClass]="{ 'is-invalid': f.submitted && postalCode.errors }"
                    placeholder=""
                >
                <div class="invalid-feedback" *ngIf="postalCode.errors && f.submitted">
                    <div *ngIf="postalCode.errors['required']">Veuillez entrer un code postal</div>
                    <div *ngIf="postalCode.errors['minlength']">
                        Ce code postal n'est pas valide.
                    </div>
                    <div *ngIf="postalCode.errors['maxlength']">
                        Ce code postal n'est pas valide.
                    </div>
                </div>

                <label class="mb-1 mt-3 form-label" for="inputEmail">Date de naissance</label>
                <input 
                    type="date" 
                    class="form-control"  
                    name="birthdayDate" 
                    [(ngModel)]="form.birthdayDate" 
                    #birthdayDate="ngModel" 
                    required
                    [ngClass]="{ 'is-invalid': f.submitted && birthdayDate.errors }"
                    placeholder=""
                >
                <div class="invalid-feedback" *ngIf="birthdayDate.errors && f.submitted">
                    <div *ngIf="birthdayDate.errors['required']">Veuillez entrer votre date de naissance</div>
                </div>

                <h5 class="mt-5 text-center">Informations sur le compte</h5>

                <label class="mb-1 mt-3 form-label" for="inputEmail">E-mail</label>
                <input 
                    type="text" 
                    class="form-control"  
                    name="email" 
                    [(ngModel)]="form.email" 
                    required minlength="3"
                    maxlength="20" 
                    #email="ngModel" 
                    [ngClass]="{ 'is-invalid': f.submitted && email.errors }"
                    placeholder=""
                >
                <div class="invalid-feedback" *ngIf="email.errors && f.submitted">
                    <div *ngIf="email.errors['required']">Veuillez entrer un email</div>
                    <div *ngIf="email.errors['minlength']">
                        Ce nom est trop court.
                    </div>
                    <div *ngIf="email.errors['maxlength']">
                        Ce nom est trop long.
                    </div>
                </div>

                
                <label class="mb-1 mt-3 form-label" for="inputPassword">Mot de passe</label>
                <input 
                    type="password" 
                    name="password" 
                    class="form-control" 
                    [(ngModel)]="form.password" 
                    required 
                    minlength="4"
                    #password="ngModel" 
                    [ngClass]="{ 'is-invalid': f.submitted && password.errors }" 
                    placeholder=""
                >
                <div class="invalid-feedback" *ngIf="password.errors && f.submitted">
                    <div *ngIf="password.errors['required']">Veuillez entrer un mot de passe.</div>
                    <div *ngIf="password.errors['minlength']">
                        Le mots de passe doit avoir au moins 4 caractères
                    </div>
                </div>
                <label class="mb-1 mt-3 form-label">Confirmer le mot de passe</label>
                <input
                    type="password"
                    class="form-control"
                    name="confirmPassword"
                    [(ngModel)]="form.confirmPassword"
                    required
                    matching
                    #confirmPassword="ngModel"
                    [ngClass]="{ 'is-invalid': f.submitted && confirmPassword.errors }"
                />
                <div
                    *ngIf="f.submitted && confirmPassword.errors"
                    class="invalid-feedback"
                >
                    <div *ngIf="confirmPassword.errors['required']">
                    Ce champ est requis
                    </div>
                    <div *ngIf="confirmPassword.errors['matching']">
                    Le mot de passe est différent
                    </div>
                </div>
                <label class="mb-1 mt-3 form-label" for="inputEmail">Code unique de votre agence (optionel)</label>
                <input 
                    type="text" 
                    class="form-control"  
                    name="company" 
                    [(ngModel)]="form.company" 
                    #company="ngModel" 
                    [ngClass]="{ 'is-invalid': f.submitted && company.errors }"
                    placeholder=""
                >
                <div class="invalid-feedback" *ngIf="company.errors && f.submitted">
             
                </div>
                <div class="form-check mt-3">
                    <input 
                        class="form-check-input" 
                        type="checkbox" 
                        name="type"
                        [(ngModel)]="form.type"
                        #type="ngModel"
                        value="agence" 
                        id="flexCheckDefault"
                    >
                    <label class="form-check-label" for="flexCheckDefault">
                        Cliquer ici pour enregistrer une nouvelle agence
                    </label>
                </div>             
                <div class="card mt-3" *ngIf="form.type">
                    <div class="card-body">
                        <label class="mb-1 mt-3 form-label" for="inputEmail">Nom de l'agence</label>
                        <input 
                            type="text" 
                            class="form-control" 
                            name="companyName" 
                            [(ngModel)]="form.companyName" 
                            minlength="3"
                            maxlength="20" 
                            #companyName="ngModel" 
                            [ngClass]="{ 'is-invalid': f.submitted && companyName.errors }"
                            placeholder=""
                        >
              
                        <label class="mb-1 mt-3 form-label" for="inputEmail">Adresse</label>
                        <input 
                            type="text" 
                            class="form-control" 
                            name="companyAdress" 
                            [(ngModel)]="form.companyAdress" 
                            minlength="3"
                            maxlength="50" 
                            #companyAdress="ngModel" 
                            [ngClass]="{ 'is-invalid': f.submitted && companyAdress.errors }"
                            placeholder=""
                        >
                        <label class="mb-1 mt-3 form-label" for="inputEmail">Ville</label>
                        <input 
                            type="text" 
                            class="form-control" 
                            name="companyCity" 
                            [(ngModel)]="form.companyCity" 
                            minlength="2"
                            maxlength="20" 
                            #companyCity="ngModel" 
                            [ngClass]="{ 'is-invalid': f.submitted && companyCity.errors }"
                            placeholder=""
                        >
                        <label class="mb-1 mt-3 form-label" for="inputEmail">Code postal</label>
                        <input 
                            type="text" 
                            class="form-control" 
                            name="companyPostalCode" 
                            [(ngModel)]="form.companyPostalCode" 
                            minlength="5"
                            maxlength="5" 
                            #companyPostalCode="ngModel" 
                            [ngClass]="{ 'is-invalid': f.submitted && companyPostalCode.errors }"
                            placeholder=""
                        >
                    </div>
                </div>
                <div class="text-center">
                    <button *ngIf="f.form.valid" id="submit" name="sign-in-button" class="btn btn-lg mb-3 px-5 no-border-radius signin mt-3 btn">Inscription</button>
                    <button *ngIf="!f.form.valid" id="submit" name="sign-in-button" class="btn btn-lg mb-3 px-5 no-border-radius signin mt-3 btn" disabled>Inscription</button>
                </div>
                <div class="alert alert-warning" *ngIf="f.submitted && isSignUpFailed">
                    {{ errorMessage }}
                </div>
                <div class="alert alert-success" *ngIf="isSuccessful">
                    Votre inscription s'est déroulé avec succès.
                </div>
            </form>
          
          </div>
  
        </div>
  
      </div>
  
      <div class="row">
        <div class="col-12 text-center mb-4" style="margin-top: 1.2rem">Vous avez déjà un compte ?<a (click)="goToLogIn()" style="cursor: pointer; color: #000A6A;"> Connectez vous</a></div>
      </div>
      
    </form>
    
  </div>